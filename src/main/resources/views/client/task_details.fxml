<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.layout.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.*?>
<?import javafx.geometry.*?>

<StackPane xmlns="http://javafx.com/javafx/25"
           xmlns:fx="http://javafx.com/fxml/1"
           fx:controller="com.myapp.controller.TaskDetailsController"
           style="-fx-background-color: linear-gradient(to bottom, #0082AC, #0A5C7D);">

    <VBox spacing="20" style="-fx-padding: 30;">

        <!-- ================= HEADER ================= -->
        <HBox spacing="40" alignment="CENTER_LEFT"
              style="-fx-background-color: #0082AC; -fx-padding: 15 30; -fx-background-radius: 20;">
            <Label text="Accueil" styleClass="top-menu"/>
            <Label text="Messages" styleClass="top-menu"/>
            <Label text="Paramètres" styleClass="top-menu"/>
            <Pane HBox.hgrow="ALWAYS"/>
            <ImageView fx:id="notifIcon" fitWidth="22" fitHeight="22"/>
        </HBox>

        <!-- ================= TITLE CARD ================= -->
        <HBox spacing="40" alignment="CENTER_LEFT"
              style="-fx-background-color: white; -fx-background-radius: 20; -fx-padding: 20;">

            <Label text="Peinture intérieure – BLOC A"
                   style="-fx-font-size: 20px; -fx-font-weight: bold;"/>

            <VBox>
                <Label text="Budget prévu"/>
                <Label text="12 000 DH" style="-fx-font-weight: bold;"/>
            </VBox>

            <VBox>
                <Label text="Budget utilisé"/>
                <Label text="10 500 DH" style="-fx-font-weight: bold;"/>
            </VBox>

            <VBox>
                <Label text="Chef du chantier"/>
                <Label text="Youssef M." style="-fx-font-weight: bold;"/>
            </VBox>
        </HBox>

        <!-- ================= CONTENT ================= -->
        <HBox spacing="20">

            <!-- ===== LEFT COLUMN ===== -->
            <VBox spacing="20" HBox.hgrow="ALWAYS">

                <!-- Résumé -->
                <VBox spacing="10" styleClass="card">
                    <Label text="Résumé de la tâche" styleClass="card-title"/>
                    <Label wrapText="true"
                           text="Les travaux de peinture intérieure ont couvert les murs et plafonds du Bloc A.
Les finitions sont en cours dans les couloirs. Aucune anomalie majeure signalée."/>
                </VBox>

                <!-- Budget table -->
                <VBox spacing="10" styleClass="card">
                    <Label text="Budget &amp; Matériaux utilisés" styleClass="card-title"/>

                    <TableView fx:id="budgetTable" prefHeight="220">
                        <columns>
                            <TableColumn text="Matériau" fx:id="colMaterial"/>
                            <TableColumn text="Quantité" fx:id="colQty"/>
                            <TableColumn text="Prix unitaire" fx:id="colPrice"/>
                            <TableColumn text="Fournisseur" fx:id="colSupplier"/>
                            <TableColumn text="Total" fx:id="colTotal"/>
                        </columns>
                    </TableView>
                </VBox>

                <!-- Images -->
                <HBox spacing="15" styleClass="card">
                    <ImageView fx:id="img1" fitWidth="160" fitHeight="110"/>
                    <ImageView fx:id="img2" fitWidth="160" fitHeight="110"/>
                    <ImageView fx:id="img3" fitWidth="160" fitHeight="110"/>
                </HBox>
            </VBox>

            <!-- ===== RIGHT COLUMN ===== -->
            <VBox spacing="20" prefWidth="380">

                <!-- Rapport -->
                <VBox spacing="10" styleClass="card">
                    <Label text="Rapport de tâche" styleClass="card-title"/>

                    <HBox spacing="10">
                        <ImageView fx:id="pdfIcon" fitWidth="32" fitHeight="32"/>
                        <Label text="RAPPORT_DE_TACHE.pdf"/>
                    </HBox>

                    <Button text="Télécharger le rapport"
                            styleClass="primary-btn"/>
                </VBox>

                <!-- Commentaires -->
                <VBox spacing="10" styleClass="card">
                    <Label text="Commentaires &amp; observations" styleClass="card-title"/>
                    <TextArea promptText="Ajouter un commentaire..."
                              prefHeight="120"/>
                </VBox>

            </VBox>
        </HBox>
    </VBox>
</StackPane>
